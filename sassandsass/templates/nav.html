{% import "navforms.html" as forms %}

<ul class="heads">
{% block heads %}
{% set navbar = generate_navbar() %}
{% set coords = {"h":0, "c":0} %}
{% for head in navbar %}
{{ coords.update(h=loop.index0, c=0) }}
    <li>
    {% block headitem %}
    <a href="{{ url_for('contentpage', name=head.page[0]) }}">{{ head.page[1] }}</a>
    {{ forms.edithead(coords) if session.admin }}
    {% endblock %}
    {% if (len(head.children) or session.admin) %}
    <ul class="l1">
        {% block children %}
        {% for child in head.children %}
        {{ coords.update(c = loop.index) }}
        <li> 
        {% block childitem %} 
        <a href="{{ url_for('contentpage', name=child[0]) }}">{{ child[1] }}</a> 
        {{ forms.editchild(coords) if session.admin }}
        {% endblock %} 
        </li>
        {% endfor %}
        {% if session.admin %}
        <li>{{ forms.additem("addchild", coords) if session.admin }}</li>
        {% endif %}
        {% endblock %}
    </ul>
    {% endif %}
    </li>
{% endfor %}
{% if session.admin %}
    <li>{{ forms.additem("addhead", coords) if session.admin}}</li>
{% endif %}
{% endblock %}
</ul>
